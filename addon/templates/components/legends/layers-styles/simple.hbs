<div class="{{flexberryClassNames.imageWrapper}}">
  {{#if _geometriesCanBeDisplayed}}
    {{#if (and styleRules (gt styleRules.length 0))}}
      {{#each styleRules as |styleRule index|}}
        <div class="{{flexberryClassNames.zoom}}">
          <canvas class="{{flexberryClassNames.image}} geometries{{index}}" width={{width}} height={{height}}></canvas>
          <label class="{{flexberryClassNames.caption}}" style="line-height: 1.3; vertical-align: top;">{{styleRule.rule.caption}}</label>
        </div>
      {{/each}}
    {{else}}
      <canvas class="{{flexberryClassNames.image}} geometries" width={{width}} height={{height}}></canvas>
      {{#if showCaption}}
        <label class="{{flexberryClassNames.caption}}" style="line-height: 1.3; vertical-align: top;">{{caption}}</label>
      {{/if}}
    {{/if}}
  {{/if}}
  {{#if _markersCanBeDisplayed}}
    {{#if (and styleRules (gt styleRules.length 0))}}
      {{#each styleRules as |styleRule index|}}
        <div class="{{flexberryClassNames.zoom}}">
          <div class="{{flexberryClassNames.marker}}">
            <div class="{{flexberryClassNames.image}}" style="width: {{styleRule.width}}px; height:{{styleRule.height}}px">
              {{#each styleRule.styleSettings.style.marker as |settings|}}
                <img class="icon-image"
                    style="{{settings.cssStyle.style}}"
                    src="{{settings.cssStyle.src}}"/>
              {{/each}}
            </div>
          </div>
          <label class="{{flexberryClassNames.caption}}" style="line-height: 1.3; vertical-align: top;">{{styleRule.rule.caption}}</label>
        </div>
      {{/each}}
    {{else}}
      <div class="{{flexberryClassNames.zoom}}">
        <div class="{{flexberryClassNames.marker}}">
          <div class="{{flexberryClassNames.image}}" style="width: {{width}}px; height:{{height}}px">
              <img class="icon-image"
                style="{{styleSettings.style.marker.cssStyle.style}}"
                src="{{styleSettings.style.marker.cssStyle.src}}"/>
          </div>
        </div>
      </div>
      {{#if showCaption}}
        <label class="{{flexberryClassNames.caption}}" style="line-height: 1.3; vertical-align: top;">{{caption}}</label>
      {{/if}}
    {{/if}}
  {{/if}}

</div>