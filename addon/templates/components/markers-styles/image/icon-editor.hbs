<table class="ui small compact celled table">
  <thead>
    <tr>
      <th class="four wide column">
        {{iconCaption}}
        {{#if allowDisabling}}
          {{flexberry-checkbox
            value=_enabled
            class="rightFloated"
          }}
        {{/if}}
      </th>
      <th class="four wide column">
        {{resizeCaption}}
      </th>
      <th class="eight wide column">
        {{anchorCaption}}
      </th>
    </tr>
  </thead>
  {{#if _enabled}}
  <tbody>
    <tr>
      <td>
        {{#if _iconFileLoadingFailed}}
          {{ui-message
            type="error"
            message=(t "components.markers-styles.image.icon-editor.icon-loading-failed-message")
          }}
        {{/if}}
        {{flexberry-file
          inputClass="fluid"
          showUploadButton=false
          showDownloadButton=false
          showPreview=false
          readonly=_iconFileIsLoading
          relatedModel=_relatedModelStub
          fileChange=(action "onIconFileChange")
        }}
      </td>
      <td class="ui relaxed list">
        <div class="item">
          <div class="fluid ui right labeled input">
            {{input
              type="number"
              min=1
              value=iconSizeNew.[0]
              disabled=(not (and _showIconImage  _enabled))
            }}
            <div class="ui basic label">
              {{t "components.markers-styles.image.icon-editor.width-caption"}}
            </div>
          </div>
        </div>
        <div class="item">
          <div class="fluid ui checkbox">
            {{flexberry-checkbox
              value=iconKeepOrigAspectRatio
              disabled=(not (and _showIconImage _enabled))
              label=(t "components.markers-styles.image.icon-editor.aspectratio-caption")
            }}
          </div>
        </div>
        <div class="item">
          <div class="fluid ui right labeled input">
            {{input
              type="number"
              min=1
              value=iconSizeNew.[1]
              disabled=(not (and _showIconImage _enabled))
            }}
            <div class="ui basic label">
              {{t "components.markers-styles.image.icon-editor.height-caption"}}
            </div>
          </div>
        </div>
        <div class="item">
          {{flexberry-button
            class="compact ui icon button"
            iconClass="maximize icon"
            tooltip=(t "components.markers-styles.image.icon-editor.setorigsize-caption")
            disabled=(not (and _showIconImage _enabled))
            click="setOrigIconSize"
          }}
        </div>
      </td>
      <td>
        <div class="icon-image-wrapper">
          {{#if _showIconImage}}
            <img class="icon-image"
              width="{{_iconSize.width}}"
              height="{{_iconSize.height}}"
              src="{{iconUrl}}"/>
            <div class="icon-anchor" onclick={{action "onIconAnchorClick"}}>
              <svg xmlns="http://www.w3.org/2000/svg"
                    version="1.1"
                    width="{{_iconSize.width}}"
                    height="{{_iconSize.height}}"
                    viewBox="0 0 {{_iconSize.width}} {{_iconSize.height}}">
                <circle cx="{{_iconAnchor.x}}"
                        cy="{{_iconAnchor.y}}"
                        r="2"
                        fill="#ff0000"
                        stroke="black"
                        stroke-width="1"/>
              </svg>
            </div>
          {{/if}}
        </div>
      </td>
    </tr>
  </tbody>
  {{/if}}
</table>
<div class="ui {{if (and _iconFileIsLoading _iconFileIsLoadingLongTime) "active" ""}} dimmer">
  <div class="ui loader"></div>
</div>
