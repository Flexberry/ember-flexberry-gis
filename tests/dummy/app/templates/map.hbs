<div class="ui grid">
  <div class="ten wide column">
    {{#flexberry-maptoolbar leafletMap=leafletMap as |toolbar|}}
      <div class="ui icon buttons">
        <button class="ui icon button" {{action "activateTool" "dragging" target=toolbar}}>
          <i class="hand paper icon"></i>
        </button>
        <button class="ui icon button" {{action "activateTool" "zoom" target=toolbar}}>
          <i class="zoom icon"></i>
        </button>
        <button class="ui icon button" {{action "activateTool" "zoomout" target=toolbar}}>
          <i class="zoom out icon"></i>
        </button>
        <button class="ui icon button" {{action "callCommand" "fullextent" target=toolbar}}>
          <i class="maximize icon"></i>
        </button>
      </div>
      <div class="ui icon buttons">
        <button class="ui icon button" {{action "activateTool" "identify" target=toolbar}}>
          <i class="info circle icon"></i>
        </button>
      </div>
    {{/flexberry-maptoolbar}}
    {{#flexberry-map
      lat=model.lat
      lng=model.lng
      zoom=model.zoom
      onMoveend=(action "updateCenter")
      leafletMapDidInit=(action "leafletMapDidInit") as |leafletMap|}}
      {{flexberry-layers leafletContainer=leafletMap layers=model.rootLayer.layers}}

      {{scale-control map=leafletMap imperial=false}}
    {{/flexberry-map}}



  </div>
  <div class="six wide column">
    {{flexberry-maplayers
      class="styled"
      layers=(get-with-dynamic-actions this "model.rootLayer.layers"
        hierarchyPropertyName="layers"
        pathKeyword="layerPath"
        dynamicActions=(array
          (hash
            on="add"
            actionName="onMapLayerAdd"
            actionArguments=(array "{% layerPath %}")
          )
          (hash
            on="edit"
            actionName="onMapLayerEdit"
            actionArguments=(array "{% layerPath %}")
          )
          (hash
            on="remove"
            actionName="onMapLayerRemove"
            actionArguments=(array "{% layerPath %}")
          )
          (hash
            on="changeVisibility"
            actionName="onMapLayerChangeVisibility"
            actionArguments=(array "{% layerPath %}.visibility")
          )
        )
      )
      add=(action "onMapLayerAdd" "model.rootLayer")
    }}
    <br>
    lat: {{flexberry-field value=model.lat}}
    lng: {{flexberry-field value=model.lng}}
    zoom: {{flexberry-field value=model.zoom}}
  </div>
</div>