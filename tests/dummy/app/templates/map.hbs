<div class="ui grid">
  <div class="ten wide column">
    {{flexberry-map
      lat=model.lat
      lng=model.lng
      zoom=model.zoom
      layers=model.layers
      zoomControl=true
      onMoveend=(action "updateCenter")
      leafletMapDidInit=(action "leafletMapDidInit")}}

    {{scale-control map=leafletMap imperial=false}}

  </div>
  <div class="six wide column">
    {{flexberry-maplayers
      class="styled"
      layers=(get-with-dynamic-actions this "model.layers"
        hierarchyPropertyName="layers"
        dynamicActions=(array
          (hash
            on="add"
            actionName="onMapLayerAdd"
            actionArguments=(array "{% propertyPath %}")
          )
          (hash
            on="edit"
            actionName="onMapLayerEdit"
            actionArguments=(array "{% propertyPath %}")
          )
          (hash
            on="remove"
            actionName="onMapLayerRemove"
            actionArguments=(array "{% propertyPath %}")
          )
          (hash
            on="changeVisibility"
            actionName="onMapLayerChangeVisibility"
            actionArguments=(array "{% propertyPath %}.visibility")
          )
        )
        add=(action "onMapLayerAdd" "model.layers")
      )}}<br>
    lat: {{flexberry-field value=model.lat}}
    lng: {{flexberry-field value=model.lng}}
    zoom: {{flexberry-field value=model.zoom}}
  </div>
</div>